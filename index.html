<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>حصيف — نموذج متكامل (٨ حسابات)</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: { DEFAULT: '#5AA044' },
            accent:  { DEFAULT: '#F8BE43' },
            ink:     { DEFAULT: '#0f172a' },
            stone:   { DEFAULT: '#f5f5f4' },
          },
          boxShadow: {
            soft: '0 18px 45px rgba(15,23,42,.08)',
          },
          borderRadius: {
            soft: '1.25rem',
          }
        }
      }
    }
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Cairo', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,.72); }
    .scroll-slim::-webkit-scrollbar{width:8px;height:8px}
    .scroll-slim::-webkit-scrollbar-thumb{background:#e5e7eb;border-radius:8px}
    .rtl-input { direction: rtl; }
    .nav-tab { @apply px-3 py-1.5 rounded-full text-xs sm:text-sm font-semibold cursor-pointer transition; }
    .nav-tab-active { @apply bg-ink text-white shadow-soft; }
    .nav-tab-inactive { @apply bg-white text-slate-700 border border-slate-200 hover:bg-slate-50; }
  </style>

  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-stone text-ink antialiased">

  <!-- Header -->
  <header class="sticky top-0 z-40 shadow-soft bg-white/95 backdrop-blur">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex flex-wrap items-center gap-3">

      <!-- Right: Hasseef logo / title -->
      <div class="flex items-center gap-3">
        <div class="w-11 h-11 rounded-2xl bg-primary text-white grid place-items-center text-lg font-black">ح</div>
        <div>
          <div class="text-base sm:text-lg font-extrabold text-ink">منصة حصيف الوطنية</div>
          <div class="text-[11px] sm:text-xs text-slate-500">برنامج شباب المملكة حصيف الوطني – نموذج أولي تشغيلي</div>
        </div>
      </div>

      <!-- Center spacer -->
      <div class="flex-1"></div>

      <!-- Left: actions -->
      <div class="flex items-center gap-2">
        <a href="https://hasseef.github.io/hasseef_pro"
           target="_blank"
           class="inline-flex items-center gap-1.5 rounded-full border border-slate-200 px-3 py-1.5 text-xs sm:text-sm font-semibold text-slate-700 hover:bg-slate-50">
          <i data-lucide="external-link" class="w-3.5 h-3.5"></i>
          النموذج الأصلي
        </a>
        <button id="aboutBtn"
                class="inline-flex items-center gap-1.5 rounded-full bg-slate-100 px-3 py-1.5 text-xs sm:text-sm font-semibold text-slate-700 hover:bg-slate-200">
          <i data-lucide="info" class="w-3.5 h-3.5"></i>
          حول هذا النموذج
        </button>
        <button id="loginBtn"
                class="inline-flex items-center gap-1.5 rounded-full bg-primary px-3 py-1.5 text-xs sm:text-sm font-semibold text-white hover:bg-emerald-700">
          <i data-lucide="log-in" class="w-3.5 h-3.5"></i>
          تسجيل الدخول
        </button>
      </div>
    </div>
  </header>

  <!-- Hero + Accounts -->
  <section class="bg-gradient-to-b from-white to-stone pb-8 pt-6">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid lg:grid-cols-[1.35fr,1fr] gap-6 items-stretch">
      <!-- Hero text -->
      <div class="space-y-4">
        <h1 class="text-2xl sm:text-3xl lg:text-4xl font-black leading-snug">
          منظومة وطنية رقمية
          <span class="text-primary">تربط الحكومة، الجامعات، القطاع الخاص، القطاع غير الربحي، الأفراد، الجهات المانحة وإمارات المناطق</span>
          في منصة واحدة متكاملة.
        </h1>
        <p class="text-sm sm:text-base text-slate-600">
          هذا النموذج الأولي يوضح التدفقات التشغيلية الرئيسية لمنصة حصيف:
          إدارة المشاريع والمبادرات، المرافق والفعاليات، الحلول المقترحة، التدريب التعاوني، التوظيف والتطوع،
          منظومة المدربين والمتحدثين، وباقات الرعاية – مع ربط جميع ذلك بمستهدفات رؤية المملكة 2030.
        </p>
        <div class="flex flex-wrap gap-2 pt-1">
          <span class="inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 text-[11px] sm:text-xs shadow-soft border border-slate-100">
            <i data-lucide="sparkles" class="w-3.5 h-3.5 text-accent"></i> إدارة المرافق والفعاليات
          </span>
          <span class="inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 text-[11px] sm:text-xs shadow-soft border border-slate-100">
            <i data-lucide="mic" class="w-3.5 h-3.5 text-primary"></i> المدربون والمتحدثون
          </span>
          <span class="inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 text-[11px] sm:text-xs shadow-soft border border-slate-100">
            <i data-lucide="briefcase" class="w-3.5 h-3.5 text-primary"></i> التوظيف والتدريب التعاوني
          </span>
          <span class="inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 text-[11px] sm:text-xs shadow-soft border border-slate-100">
            <i data-lucide="hand-heart" class="w-3.5 h-3.5 text-primary"></i> المسؤولية الاجتماعية والرعاية
          </span>
        </div>
      </div>

      <!-- Accounts grid -->
      <div class="glass rounded-soft shadow-soft border border-slate-100 p-4">
        <div class="flex items-center justify-between mb-3">
          <div>
            <div class="text-xs font-semibold text-slate-500">الحسابات</div>
            <div class="text-sm font-semibold text-ink">اختر نوع الحساب لاستعراض الخدمات</div>
          </div>
          <span class="inline-flex items-center gap-1 rounded-full bg-emerald-50 px-3 py-1 text-[11px] font-semibold text-emerald-700">
            <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
            نموذج تشغيلي تجريبي
          </span>
        </div>
        <div class="grid grid-cols-2 gap-2" id="accountsGrid"></div>
      </div>
    </div>
  </section>

  <!-- Tabs -->
  <section class="bg-white border-y border-slate-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2">
      <div id="tabs" class="flex flex-wrap gap-2 text-xs"></div>
    </div>
  </section>

  <!-- Panels -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-8">
    <div id="panels" class="space-y-8"></div>
  </main>

  <!-- KPI Strip -->
  <section class="bg-ink text-white mt-6">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
      <div>
        <div class="text-2xl font-extrabold">+280</div>
        <div class="text-xs opacity-90">جهة حكومية</div>
      </div>
      <div>
        <div class="text-2xl font-extrabold">+26K</div>
        <div class="text-xs opacity-90">منشأة قطاع خاص</div>
      </div>
      <div>
        <div class="text-2xl font-extrabold">+800</div>
        <div class="text-xs opacity-90">جهة غير ربحية</div>
      </div>
      <div>
        <div class="text-2xl font-extrabold">+10K</div>
        <div class="text-xs opacity-90">مدرب ومتحدث وطني متوقع</div>
      </div>
    </div>
  </section>

  <!-- Modal -->
  <div id="modal" class="fixed inset-0 bg-black/40 hidden items-center justify-center p-4">
    <div class="glass max-w-3xl w-full rounded-soft shadow-soft border border-slate-200 relative max-h-[90vh] overflow-auto scroll-slim p-5">
      <button id="modalClose"
              class="absolute top-3 left-3 text-slate-500 hover:text-slate-700"
              aria-label="إغلاق">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
      <div id="modalContent" class="space-y-4"></div>
    </div>
  </div>

  <script>
    // === تعريف الحسابات الثمانية ===
    const ACCOUNTS = [
      { key:'emirate',  name:'إمارة المنطقة',    icon:'shield',        color:'from-primary to-accent' },
      { key:'gov',      name:'جهة حكومية',       icon:'building-2',    color:'from-primary to-emerald-500' },
      { key:'private',  name:'قطاع خاص',         icon:'briefcase',     color:'from-primary to-sky-500' },
      { key:'nonprofit',name:'قطاع غير ربحي',    icon:'heart-handshake', color:'from-primary to-rose-400' },
      { key:'uni',      name:'الجامعات',         icon:'graduation-cap',color:'from-primary to-indigo-500' },
      { key:'funder',   name:'جهات مانحة/تمويلية', icon:'wallet',     color:'from-primary to-amber-400' },
      { key:'people',   name:'الأفراد',          icon:'users',         color:'from-primary to-fuchsia-500' },
      { key:'admin',    name:'حوكمة المنصة',     icon:'settings',      color:'from-slate-900 to-primary' },
    ];

    // === الخدمات حسب الحساب (نص ووصف) ===
    const SERVICES = {
      gov: [
        {id:'gov_project_sponsorship', label:'إدراج مبادرة/مشروع للرعاية', desc:'إدراج مبادرة أو مشروع تنموي ليُعرض على الشركات والجهات المانحة كرعاية أو تمويل، مع ربط مباشر بمستهدفات الجهة ومؤشرات رؤية 2030.'},
        {id:'gov_facilities',          label:'إدارة المرافق الحكومية',      desc:'تسجيل مرافق الجهة (قاعات، مراكز، مسارح) وإتاحتها مجاناً أو بمقابل للفعاليات المتوافقة مع مستهدفات الجهة.'},
        {id:'gov_events',              label:'إدارة الفعاليات والتصاريح',   desc:'إنشاء فعالية أو ملتقى أو ورشة عمل، وربطها بالموقع والمتحدثين والمدربين والمستهدفات وباقات الرعاية، مع مسار موافقة إمارة المنطقة.'},
        {id:'gov_challenges',          label:'طلب حلول من القطاعات والجامعات', desc:'نشر تحدٍّ أو مشكلة تنموية ليتلقى الجهة حلولاً من القطاع الخاص، غير الربحي، الجامعات، والأفراد.'},
        {id:'gov_solutions_pool',      label:'استعراض الحلول المقترحة مسبقاً', desc:'تصفح الحلول التي اقترحتها القطاعات والأفراد دون طلب مسبق من الجهة، وتصفيتها حسب البرامج والأهداف.'},
        {id:'gov_coop_training',       label:'طرح فرص تدريب تعاوني',        desc:'نشر فرص تدريب تعاوني لطلاب الجامعات والكليات، وربطها بتخصصاتهم ومشاريع الجهة.'},
        {id:'gov_jobs',                label:'طرح فرص توظيف',               desc:'إعلانات توظيف مرتبطة بمستهدفات الجهة الوطنية ومشاريعها التنموية.'},
        {id:'gov_volunteering',        label:'طرح فرص تطوع تخصصي',          desc:'إتاحة فرص تطوع تخصصية مرتبطة بالمشاريع والفعاليات للمهنيين والمتطوعين.'},
        {id:'gov_speakers',            label:'طلب متحدثين',                 desc:'اختيار متحدثين معتمدين لفعاليات الجهة من قاعدة بيانات المدربين والمتحدثين.'},
        {id:'gov_trainers',            label:'طلب مدربين',                  desc:'طلب مدربين معتمدين لتنفيذ برامج تدريبية أو ورش عمل متخصصة.'},
        {id:'gov_sponsorship_packages',label:'طرح باقات رعاية',             desc:'تحويل فعالية أو مشروع إلى فرص رعاية بباقات واضحة المزايا تستهدف القطاع الخاص والجهات المانحة.'},
        {id:'gov_reports',             label:'تقارير الأثر والحوكمة',       desc:'لوحات تقارير ذكية تربط مشاريع الجهة بمؤشرات رؤية 2030 ومؤشرات الأداء الرئيسية.'},
      ],
      uni: [
        {id:'uni_coop_training',  label:'إدارة التدريب التعاوني',       desc:'تنظيم التدريب التعاوني لطلاب الجامعة مع الجهات المختلفة وربط التقييم بالمخرجات التعليمية.'},
        {id:'uni_facilities',     label:'استثمار مرافق الجامعة',        desc:'تسجيل قاعات ومختبرات ومراكز الجامعة وإتاحتها للشركاء أو المجتمع كمرافق تدريبية أو فعاليات.'},
        {id:'uni_programs',       label:'تسويق البرامج والأبحاث',       desc:'ربط البرامج والأبحاث والرسائل العلمية بالجهات ذات العلاقة في الحكومة والقطاع الخاص وغير الربحي.'},
        {id:'uni_scientific_partner',label:'شريك علمي للمشاريع',        desc:'تقديم الجامعة كشريك علمي لتعزيز المشاريع التنموية المطروحة عبر المنصة.'},
        {id:'uni_consulting',     label:'استشارات أعضاء هيئة التدريس', desc:'إدارة طلبات الاستشارات الأكاديمية من الجهات وربطها بأعضاء هيئة التدريس وفق التخصص.'},
        {id:'uni_events',         label:'تنظيم فعاليات جامعية',         desc:'إنشاء ندوات وملتقيات وورش عمل وطلب متحدثين ومدربين ورعايات لها عبر المنصة.'},
      ],
      people: [
        {id:'people_trainer',     label:'ملف المدرب',                    desc:'تفعيل ملف مدرب وطني لإدارة الدورات والبرامج التدريبية والطلبات والتقييمات.'},
        {id:'people_speaker',     label:'ملف المتحدث',                   desc:'تفعيل ملف متحدث في الملتقيات والمحافل وإدارة الدعوات المؤسسية.'},
        {id:'people_expert',      label:'ملف الخبير/المستشار',          desc:'عرض خبرتك كمستشار وتلقي طلبات استشارات من جهات حكومية وخاصة وغير ربحية.'},
        {id:'people_retired',     label:'تفعيل المتقاعدين',             desc:'برامج ومسارات للاستفادة من خبرات المتقاعدين في مشاريع تنموية.'},
        {id:'people_opportunities',label:'فرص وظيفية وتطوعية وتدريبية', desc:'استكشاف فرص تتناسب مع ملفك المهني (وظائف، تدريب تعاوني، تطوع، تدريب مهني).'},
        {id:'people_invest',      label:'فرص استثمار ورعاية',           desc:'الاستثمار في مشاريع تنموية أو رعاية مبادرات كمساهم فردي.'},
        {id:'people_events',      label:'حضور الفعاليات والمحافل',      desc:'متابعة الفعاليات والورش المتوافقة مع اهتماماتك والتسجيل فيها.'},
        {id:'people_solutions',   label:'اقتراح حلول تنموية',           desc:'طرح حلول ومقترحات تنموية وربطها بمستهدفات جهات ورؤية 2030.'},
        {id:'people_incubation',  label:'طلب احتضان المشاريع',          desc:'طلب احتضان مشروعك لدى حاضنات ومسرعات الأعمال المتاحة عبر المنصة.'},
      ],
      nonprofit: [
        {id:'np_endowments',      label:'استثمار الأوقاف',              desc:'إدارة وتشغيل أوقاف الجهة وتعظيم أثرها التنموي عبر فرص استثمارية شراكية.'},
        {id:'np_jobs_training',   label:'وظائف / تدريب / تدريب تعاوني',desc:'نشر فرص التوظيف والتدريب للتخصصات المرتبطة بمشاريع الجهة.'},
        {id:'np_funding',         label:'طلب تمويل أو رعاية',           desc:'طرح مشاريع ومبادرات ومحافل لطلب رعاية أو تمويل من القطاع الخاص أو الجهات المانحة.'},
        {id:'np_university_consulting',label:'طلب استشارات علمية',     desc:'طلب استشارات علمية وبحثية من الجامعات لتعزيز جودة المبادرات.'},
        {id:'np_facilities',      label:'استثمار مرافق الجهة',          desc:'تسجيل مرافق الجهة وإتاحتها للاستثمار أو التأجير أو الاستخدام المجتمعي.'},
      ],
      funder: [
        {id:'funder_grants',      label:'استقبال طلبات منح وتمويل',    desc:'استقبال طلبات مشاريع ومبادرات وتصفيتها وفق معايير الجهة المانحة.'},
        {id:'funder_portfolio',   label:'محفظة التمويل والأثر',         desc:'لوحة توضح المشروعات الممولة، التقدم في التنفيذ، ومؤشرات الأثر.'},
        {id:'funder_facility_support',label:'دعم تجهيز المرافق',        desc:'تمويل تجهيز أو تطوير مرافق داعمة للتنمية (مراكز، معامل، مسارح...).'},
      ],
      private: [
        {id:'pr_sponsorships',    label:'رعاية المشاريع والفعاليات',    desc:'اكتشاف مشاريع وفعاليات جاهزة للرعاية بباقات واضحة مرتبطة بالرؤية.'},
        {id:'pr_facilities',      label:'تأجير/إتاحة مرافق الشركة',     desc:'تسجيل مرافق الشركة المتاحة للتأجير أو الاستخدام ضمن المسؤولية المجتمعية.'},
        {id:'pr_invest_2030',     label:'فرص استثمار مرتبطة بالرؤية',  desc:'طرح أو استكشاف فرص استثمارية مرتبطة ببرامج ومؤشرات رؤية 2030.'},
        {id:'pr_jobs',            label:'وظائف ومسؤولية اجتماعية',     desc:'نشر الوظائف وبرامج التمكين المجتمعي والمهني.'},
        {id:'pr_incubator',       label:'حاضنات ومسرعات الأعمال',      desc:'إدارة حاضنة أو مسرّعة وتلقي طلبات الاحتضان وتمويل المشاريع المحتضنة.'},
        {id:'pr_events',          label:'إنشاء محافل وورش عمل',        desc:'تنظيم محافل وورش عمل ودورات وطلب التصاريح والرعايات والمتحدثين.'},
        {id:'pr_coop_training',   label:'التدريب التعاوني',             desc:'طرح وإدارة فرص تدريب تعاوني مرتبطة بالجامعات.'},
        {id:'pr_private_funding', label:'طلب تمويل مشاريع خاصة',       desc:'رفع مشاريع الشركة إلى الجهات المانحة والتمويلية عبر المنصة.'},
        {id:'pr_solutions',       label:'اقتراح حلول للجهات',          desc:'تقديم حلول رقمية أو تنفيذية لتحديات منشورة أو مقترحة للجهات الحكومية وغير الربحية.'},
      ],
      emirate: [
        {id:'em_approval',        label:'موافقة الفعاليات',             desc:'استقبال جميع تفاصيل الفعالية للموافقة أو الرفض (موقع، توقيت، متحدثون، أهداف، مؤشرات، رعايات).'},
        {id:'em_dashboard',       label:'لوحة التنمية المحلية',         desc:'متابعة المشاريع والفعاليات والتمويلات والأثر التنموي على مستوى المنطقة.'},
        {id:'em_governance',      label:'حوكمة العمل بين القطاعات',    desc:'متابعة تكامل الجهات الحكومية والخاصة وغير الربحية في المنطقة.'},
      ],
      admin: [
        {id:'ad_accounts',        label:'إدارة الحسابات والصلاحيات',    desc:'تعريف الحسابات، ضبط صلاحيات الخدمات، وإدارة الاعتمادات.'},
        {id:'ad_global_config',   label:'إعدادات المنصة العامة',        desc:'تهيئة البرامج، الأهداف، المؤشرات، المناطق، والقطاعات.'},
        {id:'ad_monitoring',      label:'مراقبة الأداء والامتثال',      desc:'لوحات لمتابعة الأداء العام للمنصة ومستوى الامتثال والحوكمة.'},
      ],
    };

    // === نماذج الحقول حسب نوع الخدمة (قابلة للإدخال) ===
    const FORM_CONFIG = {
      gov_project_sponsorship: {
        title: 'نموذج إدراج مبادرة/مشروع للرعاية',
        fields: [
          {name:'title',       label:'عنوان المبادرة / المشروع', type:'text'},
          {name:'gov_entity',  label:'الجهة الحكومية المالكة',   type:'text'},
          {name:'vision_goal', label:'هدف/برنامج من رؤية 2030',  type:'select', options:['تمكين المسؤولية الاجتماعية','تعزيز فاعلية الحكومة','تنمية وتنويع الاقتصاد','جودة الحياة']},
          {name:'description', label:'الوصف التفصيلي',            type:'textarea'},
          {name:'target_sector',label:'القطاعات المستهدفة للرعاية', type:'select', options:['القطاع الخاص','القطاع غير الربحي','الجهات المانحة','أفراد مقتدرون']},
          {name:'sponsorship_range',label:'نطاق قيمة الرعاية',    type:'text'},
          {name:'expected_kpi',label:'مؤشرات الأثر المتوقعة (KPIs)', type:'textarea'},
        ]
      },
      gov_facilities: {
        title:'نموذج إتاحة مرفق حكومي',
        fields:[
          {name:'facility_name', label:'اسم المرفق', type:'text'},
          {name:'location',      label:'الموقع',     type:'text'},
          {name:'usage_type',    label:'نوع الإتاحة', type:'select', options:['مجاناً للفعاليات المتوافقة مع المستهدفات','بتكلفة مخفّضة','بتسعير تجاري']},
          {name:'eligible_events',label:'نوع الفعاليات المسموح بها', type:'textarea'},
          {name:'linked_goals',  label:'الأهداف/البرامج المرتبطة', type:'textarea'},
        ]
      },
      gov_events: {
        title:'نموذج إنشاء فعالية/محفل',
        fields:[
          {name:'event_title',   label:'عنوان الفعالية', type:'text'},
          {name:'event_type',    label:'نوع الفعالية',   type:'select', options:['ملتقى','ورشة عمل','مؤتمر','محفل موسّع']},
          {name:'event_date',    label:'التاريخ',        type:'date'},
          {name:'facility',      label:'المرفق المستهدف',type:'text'},
          {name:'speakers',      label:'المتحدثون المقترحون (من قاعدة المتحدثين)', type:'textarea'},
          {name:'trainers',      label:'المدربون (إن وجد)', type:'textarea'},
          {name:'vision_link',   label:'ارتباط الفعالية بمستهدفات رؤية 2030', type:'textarea'},
          {name:'sponsorship',   label:'هل ستُطرح كباقات رعاية؟', type:'select', options:['نعم','لا']},
        ]
      },
      gov_challenges: {
        title:'نموذج نشر تحدٍ تنموي',
        fields:[
          {name:'challenge_title', label:'عنوان التحدي', type:'text'},
          {name:'problem_desc',    label:'وصف الإشكالية', type:'textarea'},
          {name:'target_sectors',  label:'القطاعات المستهدفة لتقديم الحلول', type:'select', options:['القطاع الخاص','القطاع غير الربحي','الجامعات','الأفراد','جميع ما سبق']},
          {name:'deadline',        label:'آخر موعد لاستقبال الحلول', type:'date'},
          {name:'evaluation_criteria',label:'معايير التقييم', type:'textarea'},
        ]
      },
      // نماذج الجامعة
      uni_coop_training: {
        title:'نموذج إدارة تدريب تعاوني',
        fields:[
          {name:'partner_entity', label:'اسم الجهة الشريكة', type:'text'},
          {name:'major',          label:'التخصص/البرنامج الأكاديمي', type:'text'},
          {name:'num_students',   label:'عدد الطلاب', type:'number'},
          {name:'duration',       label:'مدة التدريب (بالأسابيع)', type:'number'},
          {name:'outcomes',       label:'المخرجات التعليمية المتوقعة', type:'textarea'},
        ]
      },
      uni_facilities: {
        title:'نموذج إتاحة مرفق جامعي',
        fields:[
          {name:'facility_name', label:'اسم القاعة/المرفق', type:'text'},
          {name:'capacity',      label:'الطاقة الاستيعابية', type:'number'},
          {name:'usage_mode',    label:'نمط الإتاحة', type:'select', options:['استثمار','خدمة مجتمعية','شراكة بحثية']},
          {name:'conditions',    label:'اشتراطات الاستخدام', type:'textarea'},
        ]
      },
      // الأفراد: المدرب والمتحدث
      people_trainer: {
        title:'تفعيل ملف مدرب',
        fields:[
          {name:'full_name',   label:'الاسم الكامل', type:'text'},
          {name:'specialty',   label:'التخصص التدريبي', type:'text'},
          {name:'experience',  label:'سنوات الخبرة', type:'number'},
          {name:'certificates',label:'الدورات والشهادات', type:'textarea'},
          {name:'preferred_topics',label:'الموضوعات المفضلة', type:'textarea'},
        ]
      },
      people_speaker: {
        title:'تفعيل ملف متحدث',
        fields:[
          {name:'full_name',   label:'الاسم الكامل', type:'text'},
          {name:'main_topics', label:'الموضوعات الرئيسية للخطابات', type:'textarea'},
          {name:'previous_events',label:'أهم المحافل السابقة', type:'textarea'},
        ]
      },
      // نموذج عام افتراضي لبقية الخدمات إن لم نضع لها تعريف خاص
    };

    // === بناء عناصر الواجهة ===
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function renderAccountsGrid(){
      const grid = $('#accountsGrid');
      grid.innerHTML = '';
      ACCOUNTS.forEach(acc => {
        const btn = document.createElement('button');
        btn.className =
          'group relative overflow-hidden rounded-2xl border border-slate-100 bg-white px-3 py-3 text-right shadow-soft hover:-translate-y-0.5 transition transform';
        btn.innerHTML = `
          <div class="flex items-center gap-2">
            <div class="w-9 h-9 rounded-xl bg-gradient-to-br ${acc.color} text-white grid place-items-center">
              <i data-lucide="${acc.icon}" class="w-4.5 h-4.5"></i>
            </div>
            <div>
              <div class="text-[13px] font-extrabold text-ink">${acc.name}</div>
              <div class="text-[11px] text-slate-500">استكشاف الخدمات</div>
            </div>
          </div>
        `;
        btn.addEventListener('click', () => activateTab(acc.key));
        grid.appendChild(btn);
      });
    }

    function renderTabs(){
      const tabs = $('#tabs');
      tabs.innerHTML = '';
      ACCOUNTS.forEach((acc, idx) => {
        const b = document.createElement('button');
        b.dataset.key = acc.key;
        b.className = 'nav-tab ' + (idx === 0 ? 'nav-tab-active' : 'nav-tab-inactive');
        b.innerHTML = `
          <span class="inline-flex items-center gap-1.5">
            <i data-lucide="${acc.icon}" class="w-3.5 h-3.5"></i>
            <span>${acc.name}</span>
          </span>
        `;
        b.addEventListener('click', () => activateTab(acc.key));
        tabs.appendChild(b);
      });
    }

    function renderPanels(){
      const container = $('#panels');
      container.innerHTML = '';
      ACCOUNTS.forEach((acc, idx) => {
        const section = document.createElement('section');
        section.id = `panel-${acc.key}`;
        section.className = (idx === 0 ? '' : 'hidden');
        const services = SERVICES[acc.key] || [];
        section.innerHTML = `
          <div class="flex flex-wrap items-center justify-between gap-2 mb-3">
            <div>
              <h2 class="text-xl sm:text-2xl font-black text-ink mb-1">${acc.name}</h2>
              <p class="text-xs sm:text-sm text-slate-600">الواجهة التشغيلية التجريبية للحساب، توضح أهم الخدمات المتاحة وربطها ببقية الحسابات.</p>
            </div>
            <div class="flex items-center gap-2">
              <span class="inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2.5 py-1 text-[11px] font-semibold text-emerald-700">
                <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
                واجهة تجريبية
              </span>
              <button class="inline-flex items-center gap-1 rounded-full bg-white border border-slate-200 px-2.5 py-1 text-[11px] text-slate-700 hover:bg-slate-50"
                      onclick="openAbout('${acc.key}')">
                <i data-lucide="help-circle" class="w-3.5 h-3.5"></i>
                كيف تعمل؟
              </button>
            </div>
          </div>
          <div class="grid md:grid-cols-2 xl:grid-cols-3 gap-3">
            ${services.map(s => `
              <div class="rounded-2xl bg-white border border-slate-100 shadow-soft p-4 flex flex-col justify-between">
                <div>
                  <div class="flex items-start justify-between gap-2">
                    <div>
                      <h3 class="text-sm sm:text-[15px] font-bold text-ink mb-1">${s.label}</h3>
                      <p class="text-xs sm:text-[13px] text-slate-600 leading-relaxed">${s.desc}</p>
                    </div>
                  </div>
                </div>
                <div class="mt-3 flex flex-wrap gap-2">
                  <button class="inline-flex flex-1 items-center justify-center gap-1 rounded-xl bg-primary px-3 py-1.5 text-[11px] sm:text-xs font-semibold text-white hover:bg-emerald-700"
                          onclick="openForm('${acc.key}','${s.id}')">
                    <i data-lucide="file-pen-line" class="w-3.5 h-3.5"></i>
                    فتح النموذج
                  </button>
                  <button class="inline-flex items-center justify-center gap-1 rounded-xl bg-slate-100 px-3 py-1.5 text-[11px] sm:text-xs font-semibold text-slate-700 hover:bg-slate-200"
                          onclick="openFlow('${acc.key}','${s.id}')">
                    <i data-lucide="workflow" class="w-3.5 h-3.5"></i>
                    تدفق الخدمة
                  </button>
                </div>
              </div>
            `).join('')}
          </div>
        `;
        container.appendChild(section);
      });
    }

    function activateTab(key){
      $$('#tabs .nav-tab').forEach(btn => {
        btn.classList.remove('nav-tab-active');
        btn.classList.remove('bg-ink','text-white','shadow-soft');
        btn.classList.add('nav-tab-inactive');
        if(btn.dataset.key === key){
          btn.classList.remove('nav-tab-inactive');
          btn.classList.add('nav-tab-active');
        }
      });
      $$('#panels > section').forEach(sec => sec.classList.add('hidden'));
      const active = $(`#panel-${key}`);
      if(active){
        active.classList.remove('hidden');
        window.scrollTo({ top: document.querySelector('header').offsetHeight + 10, behavior:'smooth' });
      }
      lucide.createIcons();
    }

    // === المودال ===
    const modal = {
      el: null,
      content: null,
      init(){
        this.el = document.getElementById('modal');
        this.content = document.getElementById('modalContent');
        document.getElementById('modalClose').addEventListener('click', () => this.hide());
        this.el.addEventListener('click', e => { if(e.target === this.el) this.hide(); });
      },
      show(html){
        this.content.innerHTML = html;
        this.el.classList.remove('hidden');
        this.el.classList.add('flex');
        lucide.createIcons();
      },
      hide(){
        this.el.classList.add('hidden');
        this.el.classList.remove('flex');
      }
    };

    // === فتح نموذج الخدمة (نماذج حقيقية قابلة للإدخال) ===
    function openForm(accKey, serviceId){
      const serviceList = SERVICES[accKey] || [];
      const service = serviceList.find(s => s.id === serviceId);
      const cfg = FORM_CONFIG[serviceId] || {
        title: `نموذج خدمة: ${service ? service.label : ''}`,
        fields: [
          {name:'title', label:'العنوان', type:'text'},
          {name:'description', label:'الوصف', type:'textarea'},
        ]
      };

      const fieldsHtml = cfg.fields.map(f => {
        if(f.type === 'textarea'){
          return `
            <div class="space-y-1">
              <label class="text-xs font-semibold text-slate-700">${f.label}</label>
              <textarea name="${f.name}" rows="3"
                        class="rtl-input w-full rounded-xl border border-slate-200 px-3 py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary"
                        placeholder=""></textarea>
            </div>`;
        }
        if(f.type === 'select'){
          return `
            <div class="space-y-1">
              <label class="text-xs font-semibold text-slate-700">${f.label}</label>
              <select name="${f.name}"
                      class="rtl-input w-full rounded-xl border border-slate-200 px-3 py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary">
                <option value="">— اختر —</option>
                ${(f.options || []).map(o => `<option value="${o}">${o}</option>`).join('')}
              </select>
            </div>`;
        }
        return `
          <div class="space-y-1">
            <label class="text-xs font-semibold text-slate-700">${f.label}</label>
            <input name="${f.name}" type="${f.type || 'text'}"
                   class="rtl-input w-full rounded-xl border border-slate-200 px-3 py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary"
                   placeholder="">
          </div>`;
      }).join('');

      const html = `
        <div class="space-y-3">
          <div>
            <div class="text-[13px] font-semibold text-primary mb-1">${accKey === 'gov' ? 'حساب جهة حكومية' : accKey === 'uni' ? 'حساب جامعة' : ''}</div>
            <h2 class="text-lg sm:text-xl font-black text-ink mb-1">${cfg.title}</h2>
            <p class="text-xs sm:text-[13px] text-slate-600">هذا نموذج حقيقي قابل للإدخال والمحاكاة، لا يتم حفظ البيانات فعليًا وإنما يوضح شكل النماذج التشغيلية داخل المنصة.</p>
          </div>
          <form class="space-y-3" onsubmit="event.preventDefault(); alert('تمت المحاكاة: النموذج مكتمل من ناحية تجربة الاستخدام.');">
            ${fieldsHtml}
            <div class="flex flex-wrap items-center justify-between gap-2 pt-1">
              <button type="submit"
                      class="inline-flex items-center gap-1 rounded-xl bg-primary px-4 py-1.5 text-xs sm:text-sm font-semibold text-white hover:bg-emerald-700">
                <i data-lucide="check-circle-2" class="w-4 h-4"></i>
                حفظ (محاكاة)
              </button>
              <span class="text-[11px] text-slate-500">
                يمكن ربط هذا النموذج بحسابات أخرى مثل: ${
                  accKey === 'gov'
                    ? 'القطاع الخاص، الجهات المانحة، القطاع غير الربحي، الجامعات'
                    : accKey === 'uni'
                      ? 'الجهات الحكومية، القطاع الخاص، الطلبة (حساب الأفراد)'
                      : 'الجهات ذات العلاقة في المنصة'
                }.
              </span>
            </div>
          </form>
        </div>
      `;
      modal.show(html);
    }

    // === فتح تدفق الخدمة (ربط بين الحسابات) ===
    function openFlow(accKey, serviceId){
      const serviceList = SERVICES[accKey] || [];
      const service = serviceList.find(s => s.id === serviceId);
      const name = service ? service.label : 'الخدمة';

      const related = (() => {
        if(accKey === 'gov' && serviceId === 'gov_project_sponsorship') {
          return 'القطاع الخاص، الجهات المانحة، القطاع غير الربحي، الجامعات، إمارة المنطقة (إذا كانت فعالية).';
        }
        if(accKey === 'uni') {
          return 'الجهات الحكومية والقطاع الخاص والقطاع غير الربحي، إضافة إلى حساب الأفراد (الطلاب والمتدربين).';
        }
        if(accKey === 'people_trainer') {
          return 'الجهات الحكومية والجامعات والقطاع الخاص التي تطلب مدربين عبر المنصة.';
        }
        return 'حسابات متعددة داخل المنصة بحسب نوع الخدمة.';
      })();

      const html = `
        <div class="space-y-3">
          <h2 class="text-lg sm:text-xl font-black text-ink mb-1">تدفق خدمة: ${name}</h2>
          <ol class="list-decimal pr-5 space-y-1.5 text-xs sm:text-sm text-slate-700">
            <li>إدخال البيانات الأساسية وربط الخدمة بأهداف وبرامج ومؤشرات رؤية 2030 ذات العلاقة.</li>
            <li>تحديد الحسابات المستهدفة (جهة حكومية، قطاع خاص، غير ربحي، جامعات، أفراد، جهات مانحة) ونمط العلاقة (تمويل، رعاية، تدريب، توظيف، تطوع، استشارات).</li>
            <li>رفع المرفقات المطلوبة (نطاق العمل، الجدول الزمني، المرافق المختارة، المتحدثون والمدربون، الميزانيات التقديرية).</li>
            <li>مراجعة واعتماد الطلب من قبل الجهة المالكة، مع إمكانية مرور المسار على إمارة المنطقة في حال كان يتطلب موافقة رسمية.</li>
            <li>إتاحة الخدمة/المبادرة/الفعالية في المنصة للجهات المتاحة للتنافس أو المشاركة، ثم متابعة التنفيذ والأثر عبر لوحات التقارير.</li>
          </ol>
          <p class="text-[11px] sm:text-xs text-slate-500">
            *هذه الخدمة ترتبط تشغيلياً مع: ${related}
          </p>
        </div>
      `;
      modal.show(html);
    }

    // === حول النموذج + تسجيل الدخول (محاكاة) ===
    document.getElementById('aboutBtn').addEventListener('click', () => {
      modal.show(`
        <div class="space-y-3">
          <h2 class="text-lg sm:text-xl font-black text-ink">حول هذا النموذج الأولي</h2>
          <p class="text-xs sm:text-[13px] text-slate-600">
            هذا الملف يمثل نموذجاً أولياً محدثاً لمنصة حصيف، مبنياً على تصميم الواجهة المعتمد (Tailwind، ألوان حصيف)،
            ويحتوي على ثمانية حسابات رئيسية، ولكل حساب مجموعة خدمات أساسية، مع نماذج إدخال حقيقية قابلة للمحاكاة
            وتدفقات تشغيلية توضح الربط بين الحسابات المختلفة.
          </p>
          <ul class="list-disc pr-5 space-y-1 text-xs sm:text-[13px] text-slate-700">
            <li>الحسابات: إمارة المنطقة، جهة حكومية، قطاع خاص، قطاع غير ربحي، الجامعات، جهات مانحة/تمويلية، الأفراد، حوكمة المنصة.</li>
            <li>الخدمات الرئيسية: إدارة المشاريع والمبادرات، المرافق، الفعاليات، الحلول المقترحة، التدريب التعاوني، الوظائف، التطوع، المدربين والمتحدثين، الرعايات.</li>
            <li>يمكن ربط هذا النموذج بواجهات برمجية (APIs) لاحقاً ليصبح نموذجاً تشغيلياً كاملاً متصلاً بقواعد بيانات فعلية.</li>
          </ul>
        </div>
      `);
    });

    document.getElementById('loginBtn').addEventListener('click', () => {
      modal.show(`
        <div class="space-y-3">
          <h2 class="text-lg sm:text-xl font-black text-ink mb-1">تسجيل الدخول (محاكاة)</h2>
          <p class="text-xs sm:text-[13px] text-slate-600">
            هذه واجهة تسجيل دخول تجريبية، الهدف منها توضيح تجربة المستخدم فقط.
          </p>
          <form class="space-y-2" onsubmit="event.preventDefault(); alert('محاكاة تسجيل الدخول: في النسخة الفعلية سيتم التحقق من البيانات والصلاحيات.');">
            <div class="space-y-1">
              <label class="text-xs font-semibold text-slate-700">البريد الإلكتروني</label>
              <input type="email" class="rtl-input w-full rounded-xl border border-slate-200 px-3 py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary" />
            </div>
            <div class="space-y-1">
              <label class="text-xs font-semibold text-slate-700">كلمة المرور</label>
              <input type="password" class="rtl-input w-full rounded-xl border border-slate-200 px-3 py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary" />
            </div>
            <div class="space-y-1">
              <label class="text-xs font-semibold text-slate-700">نوع الحساب</label>
              <select class="rtl-input w-full rounded-xl border border-slate-200 px-3 py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary">
                ${ACCOUNTS.map(a => `<option value="${a.key}">${a.name}</option>`).join('')}
              </select>
            </div>
            <button type="submit"
                    class="mt-2 inline-flex items-center gap-1 rounded-xl bg-primary px-4 py-1.5 text-xs sm:text-sm font-semibold text-white hover:bg-emerald-700">
              <i data-lucide="log-in" class="w-4 h-4"></i>
              دخول (محاكاة)
            </button>
          </form>
        </div>
      `);
    });

    function openAbout(key){
      const acc = ACCOUNTS.find(a => a.key === key);
      const txt = {
        gov: 'حساب الجهة الحكومية يمكّن الوزارات والهيئات من طرح مبادرات ومشاريع وتحديات، وإدارة المرافق والفعاليات، وطرح فرص توظيف وتدريب وتطوع، وطلب حلول من القطاعات والجامعات والأفراد، مع ربط مباشر برؤية 2030.',
        uni: 'حساب الجامعات يدير التدريب التعاوني، واستثمار المرافق، وتسويق البرامج والأبحاث، وتقديم الاستشارات العلمية، وتنظيم الفعاليات العلمية مع متحدثين ومدربين ورعايات.',
        private: 'حساب القطاع الخاص يمكّن الشركات من الرعاية والاستثمار والوظائف والتدريب التعاوني واستثمار مرافقها، وتمويل المشاريع واحتضان المبادرات، واقتراح حلول لتحديات منشورة.',
        nonprofit: 'حساب القطاع غير الربحي يمكّن الجمعيات والمؤسسات من إدارة الأوقاف، والوظائف والتدريب، وطلب التمويل والرعاية، وطلب استشارات علمية، واستثمار مرافقها.',
        funder: 'حساب الجهات المانحة والتمويلية يستقبل طلبات مشاريع ومبادرات، ويتيح إدارة محفظة التمويل ومتابعة الأثر، ودعم تجهيز المرافق ذات الأثر التنموي.',
        people: 'حساب الأفراد يمكّن المدربين والمتحدثين والخبراء والمتقاعدين وباحثي العمل والفرص التطوعية والتدريبية والاستثمارية من إدارة ملفاتهم وفرصهم واقتراح حلول وطلب احتضان المشاريع.',
        emirate: 'حساب إمارة المنطقة يتابع التنمية على مستوى المنطقة، ويعتمد الفعاليات التي تحتاج موافقة الإمارة، ويراقب تكامل العمل بين القطاعات المختلفة.',
        admin: 'حساب حوكمة المنصة يدير الحسابات والصلاحيات والإعدادات العامة والحوكمة ومراقبة الأداء والامتثال.'
      }[key] || '';
      modal.show(`
        <div class="space-y-2">
          <h2 class="text-lg sm:text-xl font-black text-ink">كيف يعمل حساب: ${acc ? acc.name : ''}؟</h2>
          <p class="text-xs sm:text-[13px] text-slate-600">${txt}</p>
        </div>
      `);
    }

    // === Init ===
    modal.init();
    renderAccountsGrid();
    renderTabs();
    renderPanels();
    lucide.createIcons();
  </script>
</body>
</html>
