<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>منصة حصيف | HASIF Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="منصة حصيف الوطنية للتكامل التن... والجهات بالحلول والمشاريع والفعاليات وفق رؤية المملكة 2030." />
  <link rel="stylesheet" href="assets/css/style.css" />
  <!-- تنسيقات بسيطة لنافذة تفاصيل المكوّنات -->
  <style>
    .module-modal {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 40;
    }
    .module-modal.hidden {
      display: none;
    }
    .module-modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(15, 23, 42, 0.6);
    }
    .module-modal-content {
      position: relative;
      background: #ffffff;
      border-radius: 1rem;
      max-width: 640px;
      width: 90%;
      padding: 1.5rem 1.75rem;
      box-shadow: 0 10px 40px rgba(15, 23, 42, 0.3);
      direction: rtl;
      text-align: right;
    }
    .module-modal-close {
      position: absolute;
      top: 0.5rem;
      left: 0.75rem;
      border: none;
      background: transparent;
      font-size: 1.4rem;
      cursor: pointer;
      line-height: 1;
      color: #64748b;
    }
    .module-modal-accounts-title {
      margin-top: 1rem;
      font-size: 0.85rem;
      color: #475569;
    }
    .module-modal-accounts-list {
      margin: 0.35rem 0 0;
      padding: 0;
      list-style: none;
      font-size: 0.8rem;
      color: #0f172a;
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
    }
    .module-modal-accounts-list li {
      background: #f1f5f9;
      border-radius: 999px;
      padding: 0.2rem 0.7rem;
      white-space: nowrap;
    }
    .module-modal h3 {
      margin-top: 0;
      margin-bottom: 0.4rem;
      font-size: 1rem;
    }
    .module-modal p {
      margin: 0;
      font-size: 0.85rem;
      color: #475569;
    }

    /* قسم الفئات المستفيدة (أنا...) */
    .audience-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.75rem;
      margin-top: 0.75rem;
    }
    @media (max-width: 900px) {
      .audience-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    @media (max-width: 600px) {
      .audience-grid {
        grid-template-columns: repeat(1, minmax(0, 1fr));
      }
    }
    .audience-card h3 {
      font-size: 0.95rem;
      margin-bottom: 0.25rem;
      color: #0f172a;
    }
    .audience-card p {
      font-size: 0.8rem;
      color: #475569;
      margin: 0 0 0.4rem;
    }
    .audience-link {
      font-size: 0.8rem;
      text-decoration: none;
      color: #1d4ed8;
    }
    .audience-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body class="lang-ar">
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo-group">
        <div class="logo-item">
          <img src="assets/img/vision2030.png" alt="شعار رؤية السعودية 2030" class="logo logo-vision" />
        </div>
        <div class="logo-item">
          <img src="assets/img/talbiya.png" alt="شعار مبادرة تلبية" class="logo logo-talbiya" />
        </div>
        <div class="logo-item">
          <img src="assets/img/hasif.png" alt="شعار منصة حصيف" class="logo logo-hasseef" />
        </div>
      </div>
      <nav class="main-nav">
        <a href="#about"><span class="t-ar">عن المنصة</span><span class="t-en">About</span></a>
        <a href="#accounts"><span class="t-ar">الحسابات</span><span class="t-en">Accounts</span></a>
        <a href="#modules"><span class="t-ar">المكوّنات</span><span class="t-en">Core Modules</span></a>
        <a href="#vision"><span class="t-ar">رؤية 2030</span><span class="t-en">Vision 2030</span></a>
        <a href="#contact"><span class="t-ar">تواصل معنا</span><span class="t-en">Contact</span></a>
      </nav>
      <div class="lang-switch">
        <button class="lang-btn active" data-lang="ar">عربي</button>
        <button class="lang-btn" data-lang="en">English</button>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-text">
          <h1 class="t-ar">منصة حصيف الوطنية للتكامل التنموي</h1>
          <h1 class="t-en">HASIF – National Development Integration Platform</h1>

          <p class="t-ar">
            نظام وطني موحد لربط الأفراد والقطاع الخاص والقطاع غير الربحي والجامعات والجهات الحكومية
            وإمارات المناطق وهيئات التطوير، من خلال حلول ومشاريع وفعاليات مرتبطة برؤية المملكة 2030.
          </p>
          <p class="t-en">
            A national digital platform connecting individuals, private sector, nonprofits, universities,
            government entities, emirates and development authorities through solutions, projects and events
            aligned with Saudi Vision 2030.
          </p>

          <div class="hero-actions">
            <a href="#accounts" class="btn btn-primary">
              <span class="t-ar">استعراض الحسابات</span>
              <span class="t-en">Explore Accounts</span>
            </a>
            <a href="#vision" class="btn btn-outline">
              <span class="t-ar">الربط مع رؤية 2030</span>
              <span class="t-en">Vision 2030 Mapping</span>
            </a>
          </div>
        </div>
        <div class="hero-card">
          <h2 class="t-ar">نظرة تقنية سريعة</h2>
          <h2 class="t-en">Technical Snapshot</h2>
          <ul>
            <li class="t-ar">١٩ مكوّن تشغيلي موحّد (Core Modules)</li>
            <li class="t-en">19 unified operational core modules</li>
            <li class="t-ar">٨ حسابات رئيسية تغطي جميع القطاعات</li>
            <li class="t-en">8 main accounts covering all sectors</li>
            <li class="t-ar">ربط ذكي مع برامج وأهداف رؤية 2030</li>
            <li class="t-en">Smart linkage to Vision 2030 programs & goals</li>
            <li class="t-ar">تكامل مع الجهات الحكومية وإمارات المناطق</li>
            <li class="t-en">Integration with government entities & emirates</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- AUDIENCES -->
    <section id="audiences" class="section section-alt">
      <div class="container section-inner">
        <div class="section-header">
          <h2 class="t-ar">لمن صُممت منصة حصيف؟</h2>
          <h2 class="t-en">Who is HASIF for?</h2>
          <p class="t-ar">
            تتيح حصيف لكل فئة من الفئات المستفيدة مسارًا واضحًا للتفاعل مع المنصة؛ من الإمارة والجهات الحكومية
            وحتى الأفراد والمانحين والجامعات والقطاع الخاص.
          </p>
          <p class="t-en">
            HASIF provides a clear interaction path for each audience segment: emirates, government entities,
            universities, private sector, nonprofits, donors and individuals.
          </p>
        </div>
        <div class="audience-grid">
          <div class="card audience-card">
            <h3 class="t-ar">أنا إمارة / هيئة تطوير</h3>
            <p class="t-ar">
              أحتاج رؤية شاملة للمنطقة، اعتماد الفعاليات والمتحدثين، متابعة المشاريع التنموية، وربط كل ذلك بالرؤية 2030.
            </p>
            <a href="accounts/emirate.html" class="audience-link t-ar">استعراض نموذج حساب الإمارة</a>
          </div>
          <div class="card audience-card">
            <h3 class="t-ar">أنا جهة حكومية</h3>
            <p class="t-ar">
              أحتاج استقبال الحلول، إطلاق المشاريع والمبادرات، طلب التمويل، وقياس الأثر وفق مؤشرات واضحة مرتبطة بالرؤية.
            </p>
            <a href="#accounts" class="audience-link t-ar">التعرّف على حساب الجهة الحكومية</a>
          </div>
          <div class="card audience-card">
            <h3 class="t-ar">أنا جامعة</h3>
            <p class="t-ar">
              أحتاج تعزيزًا علميًا للمشاريع، فرص احتضان، تفعيل المرافق الجامعية، وبرامج تدريب تعاوني مرتبطة بسوق العمل.
            </p>
            <a href="#accounts" class="audience-link t-ar">التعرّف على حساب الجامعات</a>
          </div>
          <div class="card audience-card">
            <h3 class="t-ar">أنا قطاع خاص / شركة</h3>
            <p class="t-ar">
              أحتاج فرص مسؤولية اجتماعية واستثمار في مشاريع ذات أثر تنموي واضح يمكن قياسه ومتابعته وتقاريره.
            </p>
            <a href="#accounts" class="audience-link t-ar">التعرّف على حساب القطاع الخاص</a>
          </div>
          <div class="card audience-card">
            <h3 class="t-ar">أنا مانح / مستثمر</h3>
            <p class="t-ar">
              أبحث عن مشاريع جاهزة للتمويل، حوكمة واضحة، تقارير أثر، وربط مباشر بالرؤية 2030 والجهات الحكومية.
            </p>
            <a href="#accounts" class="audience-link t-ar">التعرّف على حساب المانحين</a>
          </div>
          <div class="card audience-card">
            <h3 class="t-ar">أنا فرد</h3>
            <p class="t-ar">
              أريد تقديم مبادرات وحلول، التطوع، التدريب، فرص العمل، والاستثمار في الفرص التنموية بما يتناسب مع قدراتي.
            </p>
            <a href="accounts/individual.html" class="audience-link t-ar">استعراض نموذج حساب الأفراد</a>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section">
      <div class="container section-inner">
        <div class="section-header">
          <h2 class="t-ar">عن منصة حصيف</h2>
          <h2 class="t-en">About HASIF Platform</h2>
          <p class="t-ar">
            حصيف هو نموذج عمل ومنصة رقمية وطنية، تم بناؤها لتوحيد الممارسة التنموية عبر مجموعة من
            المكوّنات الأساسية القابلة لإعادة الاستخدام، بحيث تستخدم كل جهة نفس المكوّن لكن بالصلاحيات المناسبة لها.
          </p>
          <p class="t-en">
            HASIF is a national digital and operational model designed to unify development practices
            using reusable core modules, where each account uses the same modules with different permissions.
          </p>
        </div>
        <div class="about-grid">
          <div class="card">
            <h3 class="t-ar">تكامل وطني</h3>
            <h3 class="t-en">National Integration</h3>
            <p class="t-ar">
              تربط المنصة بين الأفراد، القطاع الخاص، القطاع غير الربحي، الجامعات، الجهات الحكومية،
              إمارات المناطق، هيئات التطوير، والمانحين في بيئة تشغيلية واحدة.
            </p>
            <p class="t-en">
              The platform connects individuals, private sector, nonprofits, universities, government entities,
              emirates, development authorities and donors in a single operational environment.
            </p>
          </div>
          <div class="card">
            <h3 class="t-ar">نموذج تقني حديث</h3>
            <h3 class="t-en">Modern Technical Model</h3>
            <p class="t-ar">
              معمارية مبنية على الخدمات المصغّرة، واجهات برمجة RESTful، وقاعدة بيانات هجينة تدعم
              المشاريع والفعاليات والتمويل والشراكات.
            </p>
            <p class="t-en">
              Built on microservices architecture, RESTful APIs and a hybrid data model that supports projects,
              events, funding and partnerships.
            </p>
          </div>
          <div class="card">
            <h3 class="t-ar">ارتباط بالرؤية 2030</h3>
            <h3 class="t-en">Aligned with Vision 2030</h3>
            <p class="t-ar">
              كل مشروع أو حل أو فعالية يمكن ربطه ببرامج وأهداف رؤية 2030 مع دعم الربط المتعدد للجهات
              والمناطق وهيئات التطوير.
            </p>
            <p class="t-en">
              Every solution, project or event can be mapped to Vision 2030 programs and goals,
              with support for multi-entity and multi-region linkage.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- ACCOUNTS -->
    <section id="accounts" class="section section-alt">
      <div class="container section-inner">
        <div class="section-header">
          <h2 class="t-ar">الحسابات الرئيسية في المنصة</h2>
          <h2 class="t-en">Main Accounts on the Platform</h2>
          <p class="t-ar">ثمانية حسابات مترابطة، لكل منها صلاحياته وواجهاته، تعمل جميعها فوق نفس المكوّنات الأساسية.</p>
          <p class="t-en">Eight interconnected accounts with different roles, all operating on the same core modules.</p>
        </div>
        <div class="accounts-grid">
          <a class="card account-card" href="accounts/emirate.html">
            <h3 class="t-ar">حساب الإمارة</h3>
            <h3 class="t-en">Emirate Account</h3>
            <p class="t-ar">رؤية شاملة للمنطقة، اعتماد الفعاليات والمتحدثين، والمسح الأمني للفعاليات.</p>
            <p class="t-en">Regional overview, approving events & speakers, and security screening.</p>
          </a>
          <a class="card account-card" href="accounts/development.html">
            <h3 class="t-ar">حساب هيئة التطوير</h3>
            <h3 class="t-en">Development Authority Account</h3>
            <p class="t-ar">إدارة المشاريع الإقليمية، الفعاليات، الشراكات، ومؤشرات التنمية.</p>
            <p class="t-en">Manages regional projects, events, partnerships and development indicators.</p>
          </a>
          <a class="card account-card" href="accounts/government.html">
            <h3 class="t-ar">حساب الجهة الحكومية</h3>
            <h3 class="t-en">Government Entity Account</h3>
            <p class="t-ar">استقبال الحلول، إطلاق المشاريع، طلب التمويل، وإدارة البرامج الحكومية.</p>
            <p class="t-en">Receives solutions, launches projects, requests funding and manages programs.</p>
          </a>
          <a class="card account-card" href="accounts/private.html">
            <h3 class="t-ar">حساب القطاع الخاص</h3>
            <h3 class="t-en">Private Sector Account</h3>
            <p class="t-ar">تقديم حلول، رعاية المشاريع، الاستثمار، تشغيل المرافق، ومسؤولية اجتماعية فعّالة.</p>
            <p class="t-en">Provides solutions, sponsors projects, invests, operates facilities and activates CSR.</p>
          </a>
          <a class="card account-card" href="accounts/nonprofit.html">
            <h3 class="t-ar">حساب القطاع غير الربحي</h3>
            <h3 class="t-en">Nonprofit Account</h3>
            <p class="t-ar">إطلاق المشاريع المجتمعية، طلب التمويل والمنح، إدارة التطوع، وتنظيم الفعاليات.</p>
            <p class="t-en">Launches community projects, requests funding & grants, manages volunteering and events.</p>
          </a>
          <a class="card account-card" href="accounts/university.html">
            <h3 class="t-ar">حساب الجامعات</h3>
            <h3 class="t-en">University Account</h3>
            <p class="t-ar">التعزيز العلمي للحلول، الاحتضان، المرافق الجامعية، التدريب التعاوني، والاستشارات.</p>
            <p class="t-en">Provides scientific review, incubation, university facilities, co-op training and consulting.</p>
          </a>
          <a class="card account-card" href="accounts/donor.html">
            <h3 class="t-ar">حساب المانحين</h3>
            <h3 class="t-en">Donor Account</h3>
            <p class="t-ar">تمويل المشاريع، رعاية الفعاليات، متابعة الأثر، وإدارة المحفظة التمويلية.</p>
            <p class="t-en">Funds projects, sponsors events, tracks impact and manages funding portfolio.</p>
          </a>
          <a class="card account-card" href="accounts/individual.html">
            <h3 class="t-ar">حساب الأفراد</h3>
            <h3 class="t-en">Individual Account</h3>
            <p class="t-ar">تقديم حلول ومبادرات، التطوع، التدريب، الوظائف، والاستثمار في الفرص التنموية.</p>
            <p class="t-en">Submits solutions, volunteers, joins trainings & jobs, and invests in opportunities.</p>
          </a>
        </div>
      </div>
    </section>

    <!-- CORE MODULES (Dynamic from core-modules.js) -->
    <section id="modules" class="section">
      <div class="container section-inner">
        <div class="section-header">
          <h2 class="t-ar">المكوّنات الأساسية (Core Modules)</h2>
          <h2 class="t-en">Core Operational Modules</h2>
          <p class="t-ar">
            طبقة موحدة من المكوّنات التشغيلية (Core Modules) تُستخدم في جميع الحسابات مع اختلاف الصلاحيات،
            ويتم تعريفها في ملف النواة التقني واستهلاكها هنا للعرض.
          </p>
          <p class="t-en">
            A unified layer of operational core modules shared across all accounts with different permissions,
            defined in the technical core file and rendered here.
          </p>
        </div>

        <!-- سيتم تعبئته ديناميكيًا حسب HASIF_CORE_MODULES -->
        <div id="modules-grid" class="modules-grid"></div>

        <!-- نافذة تفاصيل المكوّن -->
        <div id="module-modal" class="module-modal hidden">
          <div class="module-modal-backdrop"></div>
          <div class="module-modal-content">
            <button class="module-modal-close" type="button">&times;</button>
            <h3 id="module-modal-title"></h3>
            <p id="module-modal-desc"></p>
            <div id="module-modal-accounts" class="module-modal-accounts"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- VISION 2030 -->
    <section id="vision" class="section section-alt">
      <div class="container section-inner">
        <div class="section-header">
          <h2 class="t-ar">الربط مع رؤية المملكة 2030</h2>
          <h2 class="t-en">Alignment with Saudi Vision 2030</h2>
          <p class="t-ar">
            يدعم محرّك الربط في حصيف اختيار البرنامج، الهدف الاستراتيجي، الهدف الفرعي، والهدف التفصيلي،
            بالإضافة إلى الجهة الحكومية المرتبطة، المنطقة أو المناطق المستفيدة، وهيئة التطوير.
          </p>
          <p class="t-en">
            HASIF's mapping engine supports selecting the program, strategic goal, sub-goal and detailed goal,
            in addition to the related government entity, regions and development authorities.
          </p>
        </div>
        <div class="vision-layout">
          <div class="vision-text">
            <h3 class="t-ar">محرك ربط ذكي</h3>
            <h3 class="t-en">Smart Mapping Engine</h3>
            <ul>
              <li class="t-ar">١١ برنامج من برامج الرؤية مدعومة في الواجهة.</li>
              <li class="t-en">11 Vision programs supported in the UI.</li>
              <li class="t-ar">إمكانية الربط المتعدد بأكثر من هدف أو جهة أو منطقة.</li>
              <li class="t-en">Supports mapping to multiple goals, entities and regions.</li>
              <li class="t-ar">توليد تقارير تدعم صُنّاع القرار في الجهات الحكومية.</li>
              <li class="t-en">Generates reports that support decision makers in government entities.</li>
            </ul>
          </div>
          <div class="vision-card">
            <div class="vision-tag t-ar">مثال واجهة الربط</div>
            <div class="vision-tag t-en">Sample Mapping UI</div>
            <div class="vision-row">
              <label class="t-ar">برنامج الرؤية</label>
              <label class="t-en">Vision Program</label>
              <select disabled>
                <option class="t-ar">برنامج جودة الحياة</option>
                <option class="t-en">Quality of Life Program</option>
              </select>
            </div>
            <div class="vision-row">
              <label class="t-ar">الهدف الاستراتيجي</label>
              <label class="t-en">Strategic Goal</label>
              <select disabled>
                <option class="t-ar">تعزيز المشاركة المجتمعية في الأنشطة الثقافية والترفيهية</option>
                <option class="t-en">Enhance community participation in cultural & entertainment activities</option>
              </select>
            </div>
            <div class="vision-row">
              <label class="t-ar">المنطقة وهيئة التطوير</label>
              <label class="t-en">Region & Development Authority</label>
              <select disabled>
                <option class="t-ar">منطقة حائل – هيئة تطوير حائل</option>
                <option class="t-en">Hail Region – Hail Development Authority</option>
              </select>
            </div>
            <p class="vision-note t-ar">
              * هذه الواجهة للتوضيح فقط، ويقوم فريق التطوير بربطها فعليًا بقواعد بيانات برامج وأهداف الرؤية.
            </p>
            <p class="vision-note t-en">
              * This mockup is for illustration only. The actual implementation will connect to live Vision 2030 data.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section">
      <div class="container section-inner">
        <div class="section-header">
          <h2 class="t-ar">التواصل والشراكات</h2>
          <h2 class="t-en">Contact & Partnerships</h2>
          <p class="t-ar">
            للتنسيق حول الشراكات، التطوير التقني، أو اعتماد المنصة على مستوى الجهة أو المنطقة،
            يمكن التواصل عبر البيانات التالية:
          </p>
          <p class="t-en">
            For partnerships, technical collaboration, or adopting the platform at entity or regional level,
            please reach out using the channels below:
          </p>
        </div>
        <div class="contact-grid">
          <div class="card">
            <h3 class="t-ar">بيانات التواصل</h3>
            <h3 class="t-en">Contact Details</h3>
            <ul class="contact-list">
              <li>
                <span class="t-ar">البريد الإلكتروني:</span>
                <span class="t-en">Email:</span>
                <a href="mailto:info@hasif.sa">info@hasif.sa</a>
              </li>
              <li>
                <span class="t-ar">الموقع الإلكتروني:</span>
                <span class="t-en">Website:</span>
                <span>www.hasif.sa</span>
              </li>
              <li>
                <span class="t-ar">مستودع GitHub (للشيفرة):</span>
                <span class="t-en">GitHub Repository:</span>
                <a href="https://github.com/hasseef" target="_blank">github.com/hasseef</a>
              </li>
            </ul>
          </div>
          <div class="card">
            <h3 class="t-ar">نموذج تواصل سريع</h3>
            <h3 class="t-en">Quick Contact Form</h3>
            <form class="contact-form" onsubmit="return false;">
              <div class="form-row">
                <label class="t-ar">الاسم</label>
                <label class="t-en">Name</label>
                <input type="text" placeholder="..." />
              </div>
              <div class="form-row">
                <label class="t-ar">الجهة</label>
                <label class="t-en">Entity</label>
                <input type="text" placeholder="..." />
              </div>
              <div class="form-row">
                <label class="t-ar">البريد الإلكتروني</label>
                <label class="t-en">Email</label>
                <input type="email" placeholder="example@domain.com" />
              </div>
              <div class="form-row">
                <label class="t-ar">الرسالة</label>
                <label class="t-en">Message</label>
                <textarea rows="3" placeholder="..."></textarea>
              </div>
              <button class="btn btn-primary" type="submit">
                <span class="t-ar">إرسال (نموذج تجريبي)</span>
                <span class="t-en">Send (Demo Only)</span>
              </button>
            </form>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-logos">
        <img src="assets/img/vision2030.png" alt="رؤية السعودية 2030" class="logo logo-vision" />
        <img src="assets/img/talbiya.png" alt="مبادرة تلبية" class="logo logo-talbiya" />
        <img src="assets/img/hasif.png" alt="منصة حصيف" class="logo logo-hasseef" />
      </div>
      <div class="footer-text">
        <p class="t-ar">
          منصة حصيف – نموذج وطني للتكامل التنموي، منبثقة من مبادرة تلبية، متوافقة مع مستهدفات رؤية المملكة 2030.
        </p>
        <p class="t-en">
          HASIF Platform – a national model for development integration, launched by Talbiya Initiative
          and aligned with Saudi Vision 2030.
        </p>
        <p class="footer-copy">© 2025 HASIF Platform. جميع الحقوق محفوظة – All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- سكربتات المنصة -->
  <script src="assets/js/core-modules.js"></script>
  <script src="assets/js/app.js"></script>
  <script>
    // توليد بطاقات المكوّنات الأساسية من النواة المشتركة
    document.addEventListener('DOMContentLoaded', function () {
      const grid = document.getElementById('modules-grid');
      const modules = window.HASIF_CORE_MODULES || [];
      if (!grid || !modules.length) return;

      grid.innerHTML = '';

      modules.forEach(function (mod) {
        const card = document.createElement('button');
        card.type = 'button';
        card.className = 'card module-card module-card-btn';
        card.innerHTML = `
          <h3 class="t-ar">${mod.nameAr}</h3>
          <h3 class="t-en">${mod.nameEn}</h3>
          <p class="t-ar">${mod.descriptionAr}</p>
          <p class="t-en">${mod.descriptionEn}</p>
        `;
        card.addEventListener('click', function () {
          openModuleModal(mod);
        });
        grid.appendChild(card);
      });

      setupModuleModal();
    });

    function setupModuleModal() {
      const modal = document.getElementById('module-modal');
      if (!modal) return;

      const backdrop = modal.querySelector('.module-modal-backdrop');
      const closeBtn = modal.querySelector('.module-modal-close');

      const close = function () {
        modal.classList.add('hidden');
      };

      if (backdrop) backdrop.addEventListener('click', close);
      if (closeBtn) closeBtn.addEventListener('click', close);
    }

    function openModuleModal(mod) {
      const modal = document.getElementById('module-modal');
      if (!modal) return;

      const title = document.getElementById('module-modal-title');
      const desc = document.getElementById('module-modal-desc');
      const accountsDiv = document.getElementById('module-modal-accounts');

      title.textContent = mod.nameAr + ' / ' + mod.nameEn;
      desc.textContent = mod.descriptionAr;

      const mapAccountName = function (key) {
        switch (key) {
          case 'emirate': return 'حساب الإمارة';
          case 'development': return 'حساب هيئة التطوير';
          case 'government': return 'حساب الجهة الحكومية';
          case 'private': return 'حساب القطاع الخاص';
          case 'nonprofit': return 'حساب القطاع غير الربحي';
          case 'university': return 'حساب الجامعات';
          case 'donor': return 'حساب المانحين';
          case 'individual': return 'حساب الأفراد';
          default: return key;
        }
      };

      accountsDiv.innerHTML = '';

      if (Array.isArray(mod.usedByAccounts) && mod.usedByAccounts.length) {
        const titleEl = document.createElement('div');
        titleEl.className = 'module-modal-accounts-title t-ar';
        titleEl.textContent = 'الحسابات التي تستخدم هذا المكوّن:';
        accountsDiv.appendChild(titleEl);

        const list = document.createElement('ul');
        list.className = 'module-modal-accounts-list';
        mod.usedByAccounts.forEach(function (accKey) {
          const li = document.createElement('li');
          li.textContent = mapAccountName(accKey);
          list.appendChild(li);
        });
        accountsDiv.appendChild(list);
      }

      modal.classList.remove('hidden');
    }
  </script>
</body>
</html>
